{"ast":null,"code":"import _objectSpread from\"C:/Users/38066/prog/SPA-projects/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"C:/Users/38066/prog/SPA-projects/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"C:/Users/38066/prog/SPA-projects/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{useState,useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";import{List}from\"../components/List\";import{Card}from\"../components/Card\";import{Controls}from\"../components/Controls\";import{ALL_COUNTRIES}from\"../config\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var HomePage=function HomePage(_ref){var setCountries=_ref.setCountries,countries=_ref.countries;var _useState=useState(countries),_useState2=_slicedToArray(_useState,2),filtredCountries=_useState2[0],setFilteredCountries=_useState2[1];var navigate=useNavigate();var handleSearch=function handleSearch(search,region){var data=_toConsumableArray(countries);if(region){data=data.filter(function(c){return c.region.includes(region);});}if(search){data=data.filter(function(c){return c.name.toLowerCase().includes(search.toLowerCase());});}setFilteredCountries(data);};useEffect(function(){if(!countries.length)axios.get(ALL_COUNTRIES).then(function(_ref2){var data=_ref2.data;return setCountries(data);});// eslint-disable-next-line\n},[]);useEffect(function(){handleSearch();// eslint-disable-next-line\n},[countries]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Controls,{onSearch:handleSearch}),/*#__PURE__*/_jsx(List,{children:filtredCountries.map(function(c){var countryInfo={img:c.flags.png,name:c.name,info:[{title:\"Population\",description:c.population.toLocaleString()},{title:\"Region\",description:c.region},{title:\"Capital\",description:c.capital}]};return/*#__PURE__*/_jsx(Card,_objectSpread({onClick:function onClick(){return navigate(\"/country/\".concat(c.name));}},countryInfo),c.name);})})]});};","map":{"version":3,"names":["axios","useState","useEffect","useNavigate","List","Card","Controls","ALL_COUNTRIES","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","HomePage","_ref","setCountries","countries","_useState","_useState2","_slicedToArray","filtredCountries","setFilteredCountries","navigate","handleSearch","search","region","data","_toConsumableArray","filter","c","includes","name","toLowerCase","length","get","then","_ref2","children","onSearch","map","countryInfo","img","flags","png","info","title","description","population","toLocaleString","capital","_objectSpread","onClick","concat"],"sources":["C:/Users/38066/prog/SPA-projects/src/pages/HomePage.jsx"],"sourcesContent":["import axios from \"axios\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nimport { List } from \"../components/List\";\r\nimport { Card } from \"../components/Card\";\r\nimport { Controls } from \"../components/Controls\";\r\nimport { ALL_COUNTRIES } from \"../config\";\r\n\r\nexport const HomePage = ({ setCountries, countries }) => {\r\n  const [filtredCountries, setFilteredCountries] = useState(countries);\r\n\r\n  const navigate = useNavigate();\r\n\r\n  const handleSearch = (search, region) => {\r\n    let data = [...countries];\r\n\r\n    if (region) {\r\n      data = data.filter((c) => c.region.includes(region));\r\n    }\r\n\r\n    if (search) {\r\n      data = data.filter((c) =>\r\n        c.name.toLowerCase().includes(search.toLowerCase())\r\n      );\r\n    }\r\n\r\n    setFilteredCountries(data);\r\n  };\r\n\r\n  useEffect(() => {\r\n    if (!countries.length)\r\n      axios.get(ALL_COUNTRIES).then(({ data }) => setCountries(data));\r\n    // eslint-disable-next-line\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    handleSearch();\r\n    // eslint-disable-next-line\r\n  }, [countries]);\r\n\r\n  return (\r\n    <>\r\n      <Controls onSearch={handleSearch} />\r\n      <List>\r\n        {filtredCountries.map((c) => {\r\n          const countryInfo = {\r\n            img: c.flags.png,\r\n            name: c.name,\r\n            info: [\r\n              {\r\n                title: \"Population\",\r\n                description: c.population.toLocaleString(),\r\n              },\r\n              {\r\n                title: \"Region\",\r\n                description: c.region,\r\n              },\r\n              {\r\n                title: \"Capital\",\r\n                description: c.capital,\r\n              },\r\n            ],\r\n          };\r\n\r\n          return (\r\n            <Card\r\n              key={c.name}\r\n              onClick={() => navigate(`/country/${c.name}`)}\r\n              {...countryInfo}\r\n            />\r\n          );\r\n        })}\r\n      </List>\r\n    </>\r\n  );\r\n};\r\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}